{% extends 'base.html' %}

{% block content %}
    <span onclick="goBack()" class="back_link">Go Back</span>
{% if post.media %}
<div class="media-post post container">
{% else %}
<div class="post container">
{% endif %}
    <div class="post-main row">
        <div class="post-author col-sm-4">
            <img src="{{ post.author.get_avatar() }}">
            <a href="{{ url_for('user', username=post.author.username) }}">
                    {{ post.author.username }}</a><br>
                <p>Posts:  {{ post.author.post_count }}</p>
            <p>Prestige: {{ post.author.clout }}</p>
        </div>
        <div class="post-body col-sm-8">
            {{ post.body }}
        </div>
    </div>
            <div class="post-bar row">
            <div class="post-bar-actions col-xs-6">
                {% if current_user.likes_post(post) %}
                    <span class="post-bar-link post-bar-unlike" onclick="actionHandler('{{ url_for('unlike', post_id=post.id) }}')">Unlike</span>
                {% else %}
                    <span class="post-bar-link post-bar-like" onclick="actionHandler('{{ url_for('like', post_id=post.id) }}')">Like</span>
                {% endif %}
            </div>
            <div class="post-bar-info col-xs-6">
                <span class="post-bar-link post-bar-comments">
                    {{ post.get_comment_count() }} Comments
                </span>
                <span class="post-bar-likes post-bar-link">
                    {% if post.get_like_count() == 1 %}
                    1 Like
                    {% elif post.get_like_count() > 1 %}
                    {{ post.get_like_count() }} Likes
                    {% else %}
                    0 Likes
                    {% endif %}
                </span>
            </div>
            </div>
            <div id="{{ post.id }}" class="comment-block">
                {% if post.get_comments().first() %}
            {% for comment in post.get_comments() %}
                {% include '_comment.html' %}
            {% endfor %}
                {% endif %}

                <form action="" method="post">
                    {{ form.hidden_tag() }}

                    {{ form.comment.label }}
                    {{ form.comment }}
                    {% for error in form.comment.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                    {% endfor %}

                    {{ form.submit.label }}
                    {{ form.submit }}
                </form>
            </div>


</div>







{% endblock %}
